<div id="dealer-locator-container"></div>

<script>
    (async function () {
        // Load Leaflet first
        const leafletScript = document.createElement('script');
        leafletScript.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
        leafletScript.onload = async function () {

            // Now load your CSS
            const cssResponse = await fetch('https://raw.githack.com/Mid-City-Engineering/Website_Helper_Code/main/DealerLocator/dealer-locator.css');
            const cssText = await cssResponse.text();
            const style = document.createElement('style');
            style.textContent = cssText;
            document.head.appendChild(style);

            // Load HTML
            const htmlResponse = await fetch('https://raw.githack.com/Mid-City-Engineering/Website_Helper_Code/main/DealerLocator/dealer-locator.html');
            const htmlText = await htmlResponse.text();
            document.getElementById('dealer-locator-container').innerHTML = htmlText;

            // Load JavaScript
            const script = document.createElement('script');
            script.src = 'https://raw.githack.com/Mid-City-Engineering/Website_Helper_Code/main/DealerLocator/dealer-locator.js';
            script.onload = function () {
                loadDealersAndInitializeMap();
            };
            document.head.appendChild(script);
        };
        document.head.appendChild(leafletScript);
    })();
</script>
