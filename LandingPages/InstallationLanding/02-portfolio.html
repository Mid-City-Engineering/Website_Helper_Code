<style>
    :root {
        --red: #810305;
        --tan: #D4AF85;
        --dark: #0a0a0a;
        --mid: #141414;
        --border: rgba(212, 175, 133, 0.15);
    }

    *,
    *::before,
    *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        background: var(--dark);
        color: #e0e0e0;
        font-family: 'Outfit', sans-serif;
        font-weight: 300;
        overflow-x: hidden;
    }

    /* ─── INTRO STATEMENT ─────────────────────────────── */
    .intro {
        padding: 140px 8% 80px;
        max-width: 1400px;
        margin: 0 auto;
        border-bottom: 1px solid var(--border);
        opacity: 0;
        transform: translateY(30px);
        animation: fadeUp 0.9s ease-out 0.2s forwards;
    }

    .intro-eyebrow {
        font-family: 'Outfit', sans-serif;
        font-size: 0.75rem;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: var(--tan);
        margin-bottom: 32px;
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .intro-eyebrow::before {
        content: '';
        display: block;
        width: 40px;
        height: 1px;
        background: var(--red);
    }

    .intro h2 {
        font-family: 'Michroma', sans-serif;
        font-size: clamp(2.5rem, 5vw, 4.5rem);
        font-weight: 400;
        color: #fff;
        line-height: 1.15;
        letter-spacing: 0.02em;
        text-align: left;
        max-width: 800px;
    }

    .intro h2 em {
        font-style: normal;
        color: var(--tan);
    }

    /* ─── FILTER BAR ──────────────────────────────────── */
    .filter-bar {
        padding: 40px 8%;
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        opacity: 0;
        animation: fadeUp 0.7s ease-out 0.5s forwards;
    }

    .filter-btn {
        background: transparent;
        border: 1px solid var(--border);
        color: #888;
        font-family: 'Outfit', sans-serif;
        font-size: 0.78rem;
        font-weight: 400;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        padding: 8px 20px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-btn:hover,
    .filter-btn.active {
        border-color: var(--tan);
        color: var(--tan);
        background: rgba(212, 175, 133, 0.05);
    }

    /* ─── PORTFOLIO GRID ──────────────────────────────── */
    .portfolio {
        padding: 0 8% 80px;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* Flexbox rows — each .grid-row is a full-width row with equal-height items */
    .grid {
        display: flex;
        flex-direction: column;
        gap: 3px;
    }

    .grid-row {
        display: flex;
        gap: 3px;
        height: 350px;
    }

    .item {
        position: relative;
        overflow: hidden;
        cursor: pointer;
        background: var(--mid);
        height: 100%;
        min-width: 0;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .item.visible {
        opacity: 1;
        transform: translateY(0);
    }

    .item-inner {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .item-img {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        filter: brightness(0.85) saturate(0.9);
    }

    video.item-img {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        filter: brightness(0.85) saturate(0.9);
    }

    .item:hover .item-img,
    .item:hover video.item-img {
        transform: scale(1.05);
        filter: brightness(0.7) saturate(1);
    }

    .item-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(to top, rgba(10, 10, 10, 0.85) 0%, transparent 55%);
        opacity: 0;
        transition: opacity 0.4s ease;
        z-index: 2;
    }

    .item:hover .item-overlay {
        opacity: 1;
    }

    .item-label {
        position: absolute;
        bottom: 20px;
        left: 24px;
        z-index: 3;
        opacity: 0;
        transform: translateY(8px);
        transition: opacity 0.4s ease 0.05s, transform 0.4s ease 0.05s;
    }

    .item:hover .item-label {
        opacity: 1;
        transform: translateY(0);
    }

    .item-label-cat {
        font-size: 0.68rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--tan);
        margin-bottom: 4px;
    }

    .item-label-title {
        font-family: 'Outfit', sans-serif;
        font-size: 0.95rem;
        font-weight: 600;
        color: #fff;
        letter-spacing: 0.03em;
    }

    .item::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 3px;
        background: var(--red);
        z-index: 4;
        transition: width 0.5s ease;
    }

    .item:hover::after {
        width: 100%;
    }

    /* ─── FULL-WIDTH DIVIDER STATEMENT ────────────────── */
    .divider-statement {
        border-top: 1px solid var(--border);
        border-bottom: 1px solid var(--border);
        padding: 60px 8%;
        margin: 80px 0 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 40px;
    }

    .divider-statement p {
        font-family: 'Michroma', sans-serif;
        font-size: clamp(1.1rem, 2vw, 1.5rem);
        color: #fff;
        letter-spacing: 0.04em;
        line-height: 1.5;
        max-width: 600px;
        text-align: left;
    }

    .divider-statement p em {
        font-style: normal;
        color: var(--tan);
    }

    .cta-link {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        font-family: 'Outfit', sans-serif;
        font-size: 0.85rem;
        font-weight: 400;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: var(--tan);
        text-decoration: none;
        white-space: nowrap;
        transition: gap 0.3s ease, color 0.3s ease;
    }

    .cta-link:hover {
        gap: 20px;
        color: #fff;
    }

    .cta-arrow {
        width: 36px;
        height: 36px;
        border: 1px solid var(--tan);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        transition: background 0.3s ease, border-color 0.3s ease;
    }

    .cta-link:hover .cta-arrow {
        background: var(--red);
        border-color: var(--red);
    }

    /* ─── LIGHTBOX ────────────────────────────────────── */
    .lightbox {
        position: fixed;
        inset: 0;
        z-index: 9999;
        background: rgba(0, 0, 0, 0.95);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease;
    }

    .lightbox.open {
        opacity: 1;
        pointer-events: all;
    }

    .lightbox-img {
        max-width: 90vw;
        max-height: 85vh;
        object-fit: contain;
        transform: scale(0.95);
        transition: transform 0.4s ease;
    }

    video.lightbox-img {
        max-width: 90vw;
        max-height: 85vh;
        object-fit: contain;
    }

    .lightbox.open .lightbox-img {
        transform: scale(1);
    }

    .lightbox-close {
        position: absolute;
        top: 32px;
        right: 40px;
        background: none;
        border: none;
        color: var(--tan);
        font-size: 1.8rem;
        cursor: pointer;
        transition: color 0.3s;
        font-family: 'Outfit', sans-serif;
        font-weight: 300;
        line-height: 1;
    }

    .lightbox-close:hover {
        color: #fff;
    }

    .lightbox-meta {
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
    }

    .lightbox-meta-cat {
        font-size: 0.7rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--tan);
        margin-bottom: 4px;
    }

    .lightbox-meta-title {
        font-family: 'Michroma', sans-serif;
        font-size: 0.95rem;
        color: #fff;
        letter-spacing: 0.06em;
    }

    .lightbox-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: 1px solid var(--border);
        color: var(--tan);
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.1rem;
        transition: border-color 0.3s, background 0.3s;
    }

    .lightbox-nav:hover {
        border-color: var(--red);
        background: rgba(129, 3, 5, 0.2);
    }

    .lightbox-prev {
        left: 32px;
    }

    .lightbox-next {
        right: 32px;
    }

    @keyframes fadeUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* ─── RESPONSIVE ──────────────────────────────────── */
    @media (max-width: 768px) {
        .intro {
            padding: 100px 6% 60px;
        }

        .filter-bar {
            padding: 30px 6%;
        }

        .portfolio {
            padding: 0 0 60px;
        }

        .grid-row {
            height: 250px;
        }

        .divider-statement {
            flex-direction: column;
            align-items: flex-start;
            padding: 50px 6%;
        }
    }

    @media (max-width: 480px) {
        .grid-row {
            flex-direction: column;
            height: auto;
        }

        .item {
            height: 280px;
        }
    }
</style>

<div class="intro">
    <div class="intro-eyebrow">Professional Installations</div>
    <h2>Precision work.<br><em>Every vehicle. Every time.</em></h2>
</div>

<div class="filter-bar">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="lights">Lights</button>
    <button class="filter-btn" data-filter="accessories">Accessories</button>
    <button class="filter-btn" data-filter="radar">Radar</button>
    <button class="filter-btn" data-filter="stereo">Stereo</button>
</div>

<div class="portfolio">
    <div class="grid" id="portfolioGrid">
        <!-- JS builds .grid-row wrappers here -->
    </div>
</div>

<div class="divider-statement">
    <p>Every installation is performed by <em>factory-trained technicians</em> to the highest standards. We take the
        best and make it better.</p>
    <a href="/contactus" class="cta-link">
        Request an Installation
        <span class="cta-arrow">→</span>
    </a>
</div>

<div class="lightbox" id="lightbox">
    <button class="lightbox-close" id="lbClose">×</button>
    <button class="lightbox-nav lightbox-prev" id="lbPrev">←</button>
    <img class="lightbox-img" id="lbImg" src="" alt="" loading="lazy">
    <video class="lightbox-img" id="lbVideo" autoplay loop playsinline style="display:none;"></video>
    <button class="lightbox-nav lightbox-next" id="lbNext">→</button>
    <div class="lightbox-meta">
        <div class="lightbox-meta-cat" id="lbCat"></div>
        <div class="lightbox-meta-title" id="lbTitle"></div>
    </div>
</div>

<!-- Hidden source items — JS reads from here -->
<div id="itemSource" style="display:none;">

    <!-- ACCESSORIES (15) -->
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/8MwlbvuOSFOxbLq5bP5psQocd?download=0" alt="GLS450 headrest1"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/C4mr6zT4QFGrd5WCI7GqWwoce?download=0" alt="IMG_0402"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/fRWg7DabQz2kbVN8l2zfKQocf?download=0" alt="IMG_0750"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/EDmcXuBKR_mQ6zIOg-Lb9Aod0?download=0" alt="IMG_1437"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/rfCmg6Q6R7mj0ta70SMsDAod1?download=0" alt="IMG_4349"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/cJG7MDD4TZKfNMxSHVOgVwod2?download=0" alt="IMG_4350"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/Sl8YVIBXQIOjZ2rXE1DaWgod3?download=0" alt="IMG_7089"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/T9GWa2HHRlK2T4eEtGiPbAod4?download=0" alt="IMG_7184"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/IJj8d5yeSQOt_IuiJVb1jwod5?download=0" alt="IMG_7290"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/ULJLatV6QjiCpTCsVaOKvwod6?download=0" alt="IMG_7667"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/ohTUb5DlSOqLGKQwdTSF4Qod7?download=0" alt="IMG_8085"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/9N3IbOggTySstgG9gGqlDAod8?download=0" alt="IMG_8089"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/aBaF5jrvRXOmniKH6awkGAoda?download=0"
                alt="Sprinter Brush Guard" loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/I5t9aSLeRfqJO-Sn0K6jnwodb?download=0"
                alt="Sprinter motorized steps" loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="accessories" data-title="" data-cat-label="Accessories">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/Y7MFqKgVRHC7ViOafwVHEQod9?download=0" alt="metriscam13"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>

    <!-- LIGHTS (14) -->
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/jPETKx8OShKP90MPOL6GEQob0?download=0" alt="59312637764"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/-J7SxpLmSvOFd8YQuQ3EYQob1?download=0" alt="Eshadowlight1"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/MqJtWHBfSJixmr2KGmnb0gob2?download=0" alt="Estar1"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/gvNlc4CJQdCBVpYv5w351Aob3?download=0" alt="IMG_0706"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/ZnGVJkIMQJSSkpMsepIPBQob4?download=0" alt="IMG_1549"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/QbV5CsPQQtOsDNCCb_tWRAob5?download=0" alt="IMG_7300"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/yJaDOzRmTAmTsD42bCcKrAob6?download=0" alt="IMG_7666"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/zEc2gZ5WRIOodB_yduxAlgob7?download=0" alt="IMG_7860"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/pqsvK0ehR-GtFXR5niAzlQob8?download=0" alt="IMG_8186"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/JwL1ZY0pTv2TrWmQSoPwWAob9?download=0" alt="IMG_8190"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/5fe3DiE5SzKRscdA9EIs_Qoba?download=0" alt="IMG_9937"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/BYGfNkLQSsKQcgOIeDNJuAobb?download=0"
                alt="Screenshot 2026-02-24" loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/uVpf71B-TrW-KXTdlgZ3Nwobc?download=0"
                alt="Sprinter Xenon headlights LED light bar fog lights" loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="lights" data-title="" data-cat-label="Lights">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/g8IPJJMvQxqaVTMQ--7O-gobd?download=0" alt="W463 light up star"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>

    <!-- RADAR (4) -->
    <div class="item" data-category="radar" data-title="" data-cat-label="Radar">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/hSkwpbvXTL-rF4zD7XhrgQodc?download=0" alt="IMG_0733"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="radar" data-title="" data-cat-label="Radar">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/4H-BpYjkQ3WUHRqqkOFAtgodd?download=0" alt="IMG_0804"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="radar" data-title="" data-cat-label="Radar">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/QBHcxU0PRKGBQh5v8b2mYAode?download=0" alt="IMG_4334"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="radar" data-title="" data-cat-label="Radar">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/D61_K_pCSE-sLexTsKMXRAodf?download=0" alt="IMG_8243"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>

    <!-- STEREO (5) -->
    <div class="item" data-category="stereo" data-title="" data-cat-label="Stereo">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/-HwR_o5AQk6c1zS9Qop2FAoe0?download=0" alt="IMG_0700"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="stereo" data-title="" data-cat-label="Stereo">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/rjfX3yF9SHO9VHb-T7wbQwoe1?download=0" alt="IMG_7669"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="stereo" data-title="" data-cat-label="Stereo">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/ej29jFsyTBWdxOBFgHek2Qoe2?download=0" alt="IMG_7671"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="stereo" data-title="" data-cat-label="Stereo">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/157r8JXBQAOZQNaK87zWgAoe3?download=0" alt="IMG_8411"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
    <div class="item" data-category="stereo" data-title="" data-cat-label="Stereo">
        <div class="item-inner">
            <img class="item-img" src="/documents/content/b-WX81SkSvizYGGoDKdMIgoe4?download=0" alt="IMG_9633"
                loading="lazy">
            <div class="item-overlay"></div>
            <div class="item-label">
                <div class="item-label-cat"></div>
                <div class="item-label-title"></div>
            </div>
        </div>
    </div>
</div>

<script>
    (function () {
        const grid = document.getElementById('portfolioGrid');
        const source = document.getElementById('itemSource');
        const allItems = Array.from(source.querySelectorAll('.item'));

        // Row layout pattern: items-per-row and flex ratios
        // Each entry: [flex1, flex2, ...] — the number of values = items in that row
        // Ratios control relative widths. All items in a row share the same height.
        const rowPattern = [
            [2, 1],        // Row A: 2/3 + 1/3
            [1, 1, 1],     // Row B: equal thirds
            [1.4, 1],       // Row C: ~58% + ~42%
            [1, 2],        // Row D: 1/3 + 2/3
        ];

        function buildGrid(filter) {
            grid.innerHTML = '';

            const filtered = allItems.filter(item =>
                filter === 'all' || item.dataset.category === filter
            );

            let idx = 0;
            let patternIdx = 0;

            while (idx < filtered.length) {
                const rowDef = rowPattern[patternIdx % rowPattern.length];
                const row = document.createElement('div');
                row.className = 'grid-row';

                // How many items this row wants vs how many remain
                const count = Math.min(rowDef.length, filtered.length - idx);

                for (let i = 0; i < count; i++) {
                    const item = filtered[idx];
                    // Use the pattern's flex value, or equal flex for partial last row
                    const flex = (count === rowDef.length) ? rowDef[i] : 1;
                    item.style.flex = flex;
                    item.classList.add('visible');
                    row.appendChild(item);
                    idx++;
                }

                grid.appendChild(row);
                patternIdx++;
            }
        }

        // ── Filter buttons ───────────────────────────────────────────
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                buildGrid(btn.dataset.filter);
            });
        });

        // ── Initial build ────────────────────────────────────────────
        buildGrid('all');

        // ── Lightbox ─────────────────────────────────────────────────
        const lightbox = document.getElementById('lightbox');
        const lbImg = document.getElementById('lbImg');
        const lbVideo = document.getElementById('lbVideo');
        const lbCat = document.getElementById('lbCat');
        const lbTitle = document.getElementById('lbTitle');
        let currentIndex = 0;
        let visibleItems = [];

        function getVisibleItems() {
            return Array.from(grid.querySelectorAll('.item'));
        }

        function openLightbox(item) {
            visibleItems = getVisibleItems();
            currentIndex = visibleItems.indexOf(item);
            updateLightbox();
            lightbox.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function updateLightbox() {
            const item = visibleItems[currentIndex];
            if (!item) return;
            const isVideo = item.dataset.type === 'video';

            lbImg.style.display = isVideo ? 'none' : 'block';
            lbVideo.style.display = isVideo ? 'block' : 'none';

            if (isVideo) {
                const vid = item.querySelector('video.item-img');
                lbVideo.src = vid.src;
                lbVideo.muted = false;
                lbVideo.play();
            } else {
                lbVideo.pause();
                lbVideo.removeAttribute('src');
                lbImg.src = item.querySelector('.item-img').src;
            }

            lbCat.textContent = item.dataset.catLabel;
            lbTitle.textContent = item.dataset.title;
        }

        function closeLightbox() {
            lightbox.classList.remove('open');
            document.body.style.overflow = '';
            lbVideo.pause();
            lbVideo.removeAttribute('src');
        }

        grid.addEventListener('click', e => {
            const item = e.target.closest('.item');
            if (item) openLightbox(item);
        });

        document.getElementById('lbClose').addEventListener('click', closeLightbox);
        document.getElementById('lbPrev').addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + visibleItems.length) % visibleItems.length;
            updateLightbox();
        });
        document.getElementById('lbNext').addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % visibleItems.length;
            updateLightbox();
        });

        lightbox.addEventListener('click', e => {
            if (e.target === lightbox) closeLightbox();
        });

        document.addEventListener('keydown', e => {
            if (!lightbox.classList.contains('open')) return;
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft') { currentIndex = (currentIndex - 1 + visibleItems.length) % visibleItems.length; updateLightbox(); }
            if (e.key === 'ArrowRight') { currentIndex = (currentIndex + 1) % visibleItems.length; updateLightbox(); }
        });
    })();
</script>
