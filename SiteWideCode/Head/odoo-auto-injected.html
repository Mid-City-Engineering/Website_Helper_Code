<!-- Google Tag Manager -->

<script>(function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NRV5LH9Z');</script>

<!-- End Google Tag Manager -->

<!-- Script to set up smooth scrolling-->
<script>
    (function () {
        function initSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const targetId = this.getAttribute('href');

                    // Skip if it's just "#" or empty
                    if (!targetId || targetId === '#') return;

                    // ADDED: Skip if it's a full URL (contains ://)
                    if (targetId.includes('://')) {
                        console.log('[Smooth Scroll] Skipping full URL:', targetId);
                        return;
                    }

                    // ADDED: Validate it's a proper hash selector
                    if (!targetId.startsWith('#')) {
                        console.log('[Smooth Scroll] Skipping non-hash link:', targetId);
                        return;
                    }

                    // ADDED: Try-catch around querySelector in case of invalid selector
                    let targetElement;
                    try {
                        targetElement = document.querySelector(targetId);
                    } catch (error) {
                        console.log('[Smooth Scroll] Invalid selector:', targetId, error);
                        return;
                    }

                    if (targetElement) {
                        e.preventDefault();

                        // Close hamburger menu if open
                        const drawer = document.getElementById('hamburgerDrawer');
                        const hamburger = document.querySelector('.hamburger');
                        if (drawer && drawer.classList.contains('active')) {
                            if (hamburger) { hamburger.classList.remove('active'); }
                            drawer.classList.remove('active');
                        }

                        // Smooth scroll to target
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }

        // Initialize smooth scroll when DOM is fully loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initSmoothScroll);
        } else {
            // DOM already loaded (script runs after page load)
            initSmoothScroll();
        }
    })();
</script>
